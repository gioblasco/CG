<!DOCTYPE html>
<html>

<head>
	<meta charset=utf-8>
	<title>Atividade 3</title>
	<link rel="shortcut icon" type="image/png" href="icone.png"/>
	<style>
		body {
			margin: 0;
		}


	</style>
</head>

<body>
	<script src="../three/three.js"></script>
	<script src="../three/OBJLoader.js"></script>
	<script src="../three/OrbitControls.js"></script>
	<h2 align="center"> Modelo "Geocentrista" </h2>

	<script>
		var planeta1 = new THREE.Mesh();
		var planeta2 = new THREE.Mesh();
		var planeta3 = new THREE.Mesh();
		var base_carregada = new THREE.Mesh();
		var scene = new THREE.Scene();

		//cria camera com (FOV, aspect radio, near, far)
		var camera1 = new THREE.PerspectiveCamera(100, (window.innerWidth ) / window.innerHeight, 0.1, 3000);
		var camera2 = new THREE.PerspectiveCamera(50, (window.innerWidth ) / window.innerHeight, 0.1, 1000);

		//Setando posição da câmera 1
		camera1.position.z = 40;
		camera1.position.y = 5;
		camera1.position.x = 0;

		//Setando posição da câmera 2
		camera2.position.z = 10;
		camera2.position.y = 30;
		camera2.position.x = 0;

		// Setando iluminação do sol
		var light = new THREE.PointLight(0xffffcc, 3.0);
		light.position.set(0, 0, 0);
		scene.add(light);

		//Setando iluminação estática
		var static_light = new THREE.DirectionalLight(0xffffcc, 0.4);
		static_light.position.set(0, 7, 0);
		scene.add(static_light);

		

		//Setando background
		scene.background = new THREE.Color("darkblue");

		var textureLoader = new THREE.TextureLoader();
 		var texture_mars = new THREE.MeshPhongMaterial({map: textureLoader.load('2k_mars.jpg')});
		var texture_earth = new THREE.MeshPhongMaterial({map: textureLoader.load('2k_earth_daymap.jpg')});
		var texture_mercury = new THREE.MeshPhongMaterial({map: textureLoader.load('2k_mercury.jpg')});
		var texture_sun = new THREE.MeshToonMaterial({map: textureLoader.load('2k_sun.jpg')});

		//Setando formato do sol
		var sun_geometry = new THREE.SphereGeometry(6, 50, 50, 0, Math.PI * 2, 0, Math.PI * 2);
		var sun = new THREE.Mesh(sun_geometry, texture_sun);
		sun.position.set(0,0, 0);
		scene.add( sun );

		var earth_geometry   = new THREE.SphereGeometry(5, 32, 32);
		var earthMesh = new THREE.Mesh(earth_geometry, texture_earth);
		scene.add(earthMesh);

		var mars_geometry   = new THREE.SphereGeometry(2.65, 32, 32);
		mars_geometry.translate(15,0,0);
		var marsMesh = new THREE.Mesh(mars_geometry, texture_mars);
		scene.add(marsMesh);

		var mercury_geometry   = new THREE.SphereGeometry(1.9, 32, 32);
		mercury_geometry.translate(-15,0,0);
		var mercuryMesh = new THREE.Mesh(mercury_geometry, texture_mercury);
		scene.add(mercuryMesh);

		// renderer é o que faz o objeto aparecer na tela
		var renderer = new THREE.WebGLRenderer();
		// aqui é definido que o renderer tem tamanho da janela do browser
		renderer.setSize(0.99*window.innerWidth, 0.99*window.innerHeight);
		renderer.setPixelRatio(window.devicePixelRatio);

		// elemento <canvas>
		document.body.appendChild(renderer.domElement);

		// Setando rotação da câmera
		var controls = new THREE.OrbitControls( camera1 );
		//controls.autoRotate = true;
		controls.autoRotateSpeed = 4;
		controls.update();

		// Setando rotação do sol
		var animate = function() {
			timestamp = Date.now() * 0.00003;
			sun.position.x = Math.cos(timestamp * 25) * 25;
    	sun.position.z = Math.sin(timestamp * 25) * 25;
			light.position.x = sun.position.x;
			light.position.z = sun.position.z;
			planeta1.rotation.y += 0.001;
			planeta2.rotation.y += 0.002;
			planeta3.rotation.y += 0.003;
			requestAnimationFrame(animate);
			renderer.render(scene, camera1);
			controls.update();
		};
		animate();

	</script>
</body>

</html>
